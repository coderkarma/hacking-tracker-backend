(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{158:function(e,t,a){e.exports=a.p+"static/media/trail1.7cae47f7.jpeg"},159:function(e,t,a){e.exports=a.p+"static/media/trail2.ed3e20b8.jpeg"},160:function(e,t,a){e.exports=a.p+"static/media/trail3.35122dfc.jpeg"},252:function(e,t,a){e.exports=a(448)},257:function(e,t,a){},258:function(e,t,a){},376:function(e,t,a){},377:function(e,t,a){},392:function(e,t,a){},393:function(e,t,a){},394:function(e,t,a){},447:function(e,t,a){},448:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(25),o=a.n(r),i=(a(257),a(15)),s=a(16),c=a(20),m=a(17),u=a(19),d=a(34),h=a(40),p=a(72),g=a.n(p),f=a(73),E=a.n(f),b=a(47),v=a.n(b),y=(a(258),a(74)),C=a.n(y),w=a(21),k=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(w.a,{onClick:this.props.handleLogout,color:"inherit"},"Logout"),l.a.createElement(h.b,{to:"/profile",color:"inherit"},"PROFILE"))}}]),t}(n.Component),j=a(50),O=a(55),S=a(22),N=a.n(S);function L(e){return l.a.createElement("div",null,l.a.createElement("form",null,l.a.createElement("input",{type:"email",name:"loginemail",placeholder:"email",onChange:e.handleChange}),l.a.createElement("input",{type:"password",name:"loginpassword",placeholder:"password",onChange:e.handleChange}),l.a.createElement(w.a,{onClick:e.handleSubmit},"Login ")),!1===e.errorMessage?null:l.a.createElement("p",null,"incorrect password/email"))}function I(e){return l.a.createElement("div",null,l.a.createElement("form",null,l.a.createElement("input",{type:"text",name:"displayname",placeholder:"Display Name",onChange:e.handleChange}),l.a.createElement("input",{type:"email",name:"signupemail",placeholder:"email",onChange:e.handleChange}),l.a.createElement("input",{type:"password",name:"signuppassword",placeholder:"password",onChange:e.handleChange}),l.a.createElement(w.a,{onClick:e.handleSubmit},"Submit"),!1===e.errorMessage?null:l.a.createElement("p",null,"User already exists!")))}var x=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={type:null,open:!1,displayname:null,loginpassword:null,signuppassword:null,loginemail:null,signupemail:null,errorMessage:!1},a.showModel=function(e){a.setState({type:e,open:!0})},a.handleClose=function(){a.setState({type:null,open:!1})},a.handleChange=function(e){console.log(e.target.value),a.setState(Object(j.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=Object(O.a)(Object(O.a)(a));"login"===t.state.type?N.a.post("http://localhost:3000/users/login",{email:t.state.loginemail,password:t.state.loginpassword}).then(function(e){localStorage.setItem("token",e.data.signedJwt),t.props.handleLogin(e.data.user)},function(e){a.setState({errorMessage:!0})}).catch(function(e){return console.log(e)}):"signup"===t.state.type&&N.a.post("http://localhost:3000/users/signup",{email:a.state.signupemail,password:a.state.signuppassword,displayname:a.state.displayname}).then(function(e){localStorage.token=e.data.signedJwt,t.props.handleLogin(e.data.user)},function(e){a.setState({errorMessage:!0})}).catch(function(e){return console.log(e)})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t="login"===this.state.type?l.a.createElement(L,{handleChange:this.handleChange,handleSubmit:this.handleSubmit,errorMessage:this.state.errorMessage}):l.a.createElement(I,{handleChange:this.handleChange,handleSubmit:this.handleSubmit,errorMessage:this.state.errorMessage});return l.a.createElement("div",null,l.a.createElement(w.a,{onClick:function(t){return e.showModel("login")},color:"inherit"},"Login"),l.a.createElement(w.a,{onClick:function(t){return e.showModel("signup")},color:"inherit"},"SignUp"),l.a.createElement(w.b,{onClose:this.handleClose,"aria-labelledby":"customized-dialog-title",open:this.state.open},l.a.createElement(w.e,{id:"customized-dialog-title",onClose:this.handleClose}),l.a.createElement(w.d,null,t),l.a.createElement(w.c,null,l.a.createElement("button",{onClick:this.handleClose,color:"primary"},"Close"))))}}]),t}(n.Component);var D=Object(d.withStyles)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20}})(function(e){var t=e.classes,a=e.isLoggedIn?l.a.createElement(k,{handleLogout:e.handleLogout}):l.a.createElement(x,Object.assign({handleLogin:e.handleLogin},e));return l.a.createElement("div",{className:t.root},l.a.createElement(g.a,{position:"fixed"},l.a.createElement(E.a,null,l.a.createElement(C.a,{className:t.menuButton,color:"inherit","aria-label":"Menu"}),l.a.createElement(v.a,{variant:"h6",color:"inherit",className:t.grow},l.a.createElement(h.b,{to:"/",className:"link"},l.a.createElement("span",{className:"animated fadeInLeft"},"Hiking")," ",l.a.createElement("i",{className:"fas fa-hiking"})," Tracker")),a)))}),M=(a(376),a(41)),U=a(455),T=a(157),B=a(456),H=a(449),A=a(454),z=a(450),J=a(451),P=a(453),F=(a(377),a(153)),R=a.n(F),G=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={lgShow:!1,comments:"",newComment:""},a.saveComment=function(e){e.preventDefault();var t=R()(localStorage.token);console.log(t);var n={body:a.state.newComment,userId:t._id,trailId:a.props.trailDetails.id,dateCreated:(new Date).toLocaleString()};console.log(n),N.a.post("http://localhost:3000/comment",n)},a.handleChange=function(e){a.setState(Object(j.a)({},e.target.name,e.target.value))},a.fetchComments=function(e){e.preventDefault(),console.log("in show comments"),N.a.get("http://localhost:3000/trails/comments/".concat(a.props.trailDetails.id)).then(function(e){console.log(e),a.setState({comments:e.data})}).catch(function(e){console.log(e)})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.comments?this.state.comments.map(function(e){return l.a.createElement("div",null,l.a.createElement("h1",null,e.body))}):null;return l.a.createElement(P.a,{size:"lg",show:this.props.showDetail,onHide:this.props.hideDetail,"aria-labelledby":"example-modal-sizes-title-lg"},l.a.createElement(P.a.Header,{closeButton:!0},l.a.createElement(P.a.Title,{id:"example-modal-sizes-title-lg"},"All comments for this trail")),l.a.createElement(P.a.Body,null,l.a.createElement("textarea",{id:"comment",cols:"10",rows:"10",name:"newComment",onChange:this.handleChange}),l.a.createElement("input",{type:"button",value:"submit",onClick:this.saveComment}),l.a.createElement("input",{type:"button",value:"Show Comments",onClick:this.fetchComments}),e))}}]),t}(n.Component),W=(a(392),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){e.preventDefault(),a.setState({value:e.target.value})},a.showModel=function(e){var t=e.target.dataset.id;N.a.get("http://localhost:3000/trails/details/ ".concat(t)).then(function(e){console.log(e.data.trails),a.setState({trailsDetailModel:!0,selectedTrailsDetail:e.data.trails[0]})}).catch(function(e){console.log(e)})},a.hideModel=function(e){a.setState({trailsDetailModel:!1})},a.getLocation=function(e){var t="http://localhost:3000";"localhost"!==window.location.hostname&&(t="https://agile-fjord-52758.herokuapp.com");var n=a.state.value.replace(/\s/g,"+"),l="".concat(t,"/trails/geolocation/").concat(n);return console.log(l),fetch(l).then(function(e){return e.json()}).catch(function(e){console.log("error occured",e)})},a.handleSubmit=function(e){e.preventDefault(),a.getLocation().then(function(e){console.log(e),a.setState({location:e.trails})})},a.addTrail=function(e){console.log(a.props);var t=localStorage.getItem("token");t&&N.a.post("http://localhost:3000/trails/add",{trail:e},{headers:{"x-token":t}}).then(function(){a.props.refreshUser()})},a.state={value:"",location:"",trailId:"",trailsDetailModel:!1,selectedTrailsDetail:""},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;console.log(this.state.selectedTrailsDetail);var t=this.state.location?this.state.location.map(function(t,a){return l.a.createElement(T.a,{xs:12,md:4,lg:4,key:a},l.a.createElement(B.a,{className:"api-cards animated slideInUp"},l.a.createElement(B.a.Img,{variant:"top","data-id":t.id,src:t.imgMedium,onClick:e.showModel,className:"card-image"}),l.a.createElement(B.a.Body,null,l.a.createElement(B.a.Title,null,t.name)),l.a.createElement(H.a,{onClick:function(){return e.addTrail(t)}},"Save")))}):"";return l.a.createElement("div",null,l.a.createElement(A.a,{className:"py-3",onSubmit:this.handleSubmit},l.a.createElement("input",{type:"text",value:this.state.value,onChange:this.handleChange,placeholder:"Search Trails by City"})),l.a.createElement(G,{trailDetails:this.state.selectedTrailsDetail,showDetail:this.state.trailsDetailModel,hideDetail:this.hideModel}),l.a.createElement(z.a,{className:"searched-trail"},l.a.createElement(J.a,null,t)))}}]),t}(n.Component)),V=a(158),Y=a.n(V),_=a(159),K=a.n(_),$=a(160),q=a.n($),Q=(a(393),a(394),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("footer",{className:"page-footer font-small special-color-dark pt-4"},l.a.createElement("div",{className:"container"},l.a.createElement("ul",{className:"list-unstyled list-inline text-center"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(w.f,{className:"btn-floating btn-tw mx-1",href:"https://twitter.com/karmadrukpa22"},l.a.createElement("i",{className:"fab fa-twitter black"}," "))),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(w.f,{className:"btn-floating btn-li mx-1",href:"https://www.linkedin.com/in/karma-drukpa-009607129/"},l.a.createElement("i",{className:"fab fa-linkedin-in black"}," "))),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement(w.f,{className:"btn-floating btn-dribbble mx-1",href:"https://github.com/coderkarma"},l.a.createElement("i",{className:"fab fa-github black"}))))),l.a.createElement("div",{className:"footer-copyright text-center py-3"},"Built by Karma"),l.a.createElement("div",{className:"footer-copyright text-center py-3"},"\xa9 2019 Copyright")))}}]),t}(n.Component)),X=a(76),Z=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(e){return l.a.createElement("div",{className:"overlay"},l.a.createElement("div",null,l.a.createElement(U.a,null,l.a.createElement(U.a.Item,{className:"carousel-images"},l.a.createElement("img",{className:"d-block w-100",src:Y.a,alt:"First slide"}),l.a.createElement(U.a.Caption,null,l.a.createElement(X.Animated,{animationIn:"bounceInLeft",animationOut:"fadeOut",isVisible:!0},l.a.createElement("h3",{className:"animated fadeInBigLeft"},"Find trails based on your location")))),l.a.createElement(U.a.Item,null,l.a.createElement("img",{className:"d-block w-100",src:K.a,alt:"Third slide"}),l.a.createElement(U.a.Caption,null,l.a.createElement("h3",{className:"animated fadeInBigLeft"},"Explore Hiking Trails"))),l.a.createElement(U.a.Item,null,l.a.createElement("img",{className:"d-block w-100 ",src:q.a,alt:"Third slide"}),l.a.createElement(U.a.Caption,null,l.a.createElement("h3",{className:"animated fadeInBigLeft"},"Save Your Favorite Hiking Trails To Your Profile")))),l.a.createElement(W,this.props),l.a.createElement(Q,null)))}}]),t}(n.Component),ee=a(452),te=(a(447),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={displayname:"",email:"",trailId:localStorage.getItem("userId"),password:"",trails:[],datejoined:""},a.deleteTrail=function(e){var t=localStorage.getItem("token");N.a.delete("http://localhost:3000/trails/remove/".concat(e),{headers:{"x-token":t}}).then(function(){a.props.refreshUser()})},a.onHandleChange=function(e){console.log(a.state),a.setState(Object(j.a)({},e.target.name,e.target.value))},a.editProfileHandle=function(e){e.preventDefault();var t=a.props.user._id,n={};""!==a.state.displayname&&(n.displayname=a.state.displayname),""!==a.state.email&&(n.email=a.state.email),console.log(n),N.a.put("http://localhost:3000/users/".concat(t),n).then(function(){a.props.refreshUser()})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.user;return l.a.createElement("div",null,l.a.createElement(ee.a,null,l.a.createElement(X.Animated,{animationIn:"bounceInRight",animationOut:"fadeOut",isVisible:!0},l.a.createElement("h1",{className:"profile animated"}," Welcome ",t.displayname," ")),l.a.createElement("div",null,l.a.createElement("h5",null,"Email: ",t.email)),l.a.createElement("div",null,l.a.createElement("p",null,"DateJoined: ",Date().toLocaleString())),l.a.createElement(A.a.Group,{action:"PUT"},l.a.createElement("input",{type:"text",placeholder:t.displayname,onChange:this.onHandleChange,name:"displayname"}),l.a.createElement("input",{type:"text",placeholder:t.email,onChange:this.onHandleChange,name:"email"}),l.a.createElement("button",{onClick:this.editProfileHandle,variant:"info"},"Edit")),l.a.createElement("p",{className:"list-trail"},"List your hiking trails to visit in future!!")),l.a.createElement("div",null,t.trails.map(function(t){if(!t)return null;var a=l.a.createElement(T.a,{xs:6,md:4,lg:4},l.a.createElement(B.a,{className:"profile-card"},l.a.createElement(B.a.Img,{src:t.imgMedium,alt:t.name}),l.a.createElement(B.a.Body,null,l.a.createElement(B.a.Title,null,t.name),l.a.createElement(B.a.Text,null,t.summary),l.a.createElement(B.a.Text,null,l.a.createElement("i",{className:"fas fa-star"},t.stars))),l.a.createElement(H.a,{variant:"danger",onClick:function(){return e.deleteTrail(t.id)}},"Remove")));return l.a.createElement("div",{className:"d-inline-block"},l.a.createElement(z.a,{className:"searched-trail"},l.a.createElement(J.a,null,a)))})))}}]),t}(n.Component));function ae(e){return console.log("router",e),e.isLoggedIn?l.a.createElement(M.d,null,l.a.createElement(M.b,{exact:!0,path:"/",render:function(){return l.a.createElement(Z,{user:e.user,refreshUser:e.refreshUser})}}),l.a.createElement(M.b,{path:"/profile",render:function(){return l.a.createElement(te,{user:e.user,refreshUser:e.refreshUser})}})):l.a.createElement(M.d,null,l.a.createElement(M.a,{from:"/profile",to:"/"}),l.a.createElement(M.b,{exact:!0,path:"/",render:function(){return l.a.createElement(Z,{user:e.user,refreshUser:e.refreshUser})}}))}var ne=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={isLoggedIn:!1,loadingUser:!0,user:null},a.handleLogin=function(e){a.setState({isLoggedIn:!0,user:e},function(){a.props.history.push("/profile")})},a.refreshUser=function(){var e=localStorage.getItem("token");e?N.a.get("http://localhost:3000/users/profile",{headers:{"x-token":e}}).then(function(e){a.setState({user:e.data,loadingUser:!1,isLoggedIn:!0})}).catch(function(){a.handleLogout()}):a.setState({user:null,loadingUser:!1})},a.handleLogout=function(){localStorage.clear(),a.setState({isLoggedIn:!1,user:null,loadingUser:!1},function(){a.props.history.push("/")})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.refreshUser()}},{key:"render",value:function(){return this.state.loadingUser?null:l.a.createElement("div",{className:"App"},l.a.createElement(D,{handleLogout:this.handleLogout,isLoggedIn:this.state.isLoggedIn,handleLogin:this.handleLogin}),l.a.createElement(ae,{isLoggedIn:this.state.isLoggedIn,user:this.state.user,refreshUser:this.refreshUser}))}}]),t}(n.Component),le=Object(M.f)(ne);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(h.a,null,l.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[252,1,2]]]);
//# sourceMappingURL=main.06b44006.chunk.js.map